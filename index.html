<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>galario &#8212; galario 0.1 documentation</title>
    <link rel="stylesheet" href="_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="How to build and install galario" href="install.html" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <link rel="shortcut icon" type="image/png" href="_static/favicon.png" />
    <meta name="viewport" content="width=device-width,initial-scale=0.8">
    
    

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="responsive-menu"><a href="#sidebar-anchor" title="Navigation">&#9776;</a></li>
        <li><a href="#">galario 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    
        <div class="badge">
            <a href="https://github.com/mtazzari/galario/">Fork me on GitHub</a>
            <img src="_static/right-red@2x.png">
        </div>
    
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="galario">
<h1>galario<a class="headerlink" href="#galario" title="Permalink to this headline">¶</a></h1>
<div class="section" id="gpu-accelerated-library-for-analysing-radio-interferometry-observations">
<h2><strong>GPU Accelerated Library for Analysing Radio Interferometry Observations</strong><a class="headerlink" href="#gpu-accelerated-library-for-analysing-radio-interferometry-observations" title="Permalink to this headline">¶</a></h2>
<p><cite>galario</cite> exploits the computing power of modern graphic cards (GPUs) to accelerate the comparison of model
predictions to the observations of radio interferometers. Namely, it speeds up the computation of the synthetic visibilities
given a model image (or an axisymmetric brightness profile) and their comparison to the observations.</p>
<p>It is licensed under LGPLv3 and along with the GPU accelerated version based on the
<a class="reference external" href="https://developer.nvidia.com/cuda-toolkit">CUDA Toolkit</a> offers a CPU counterpart accelerated with
<a class="reference external" href="http://www.openmp.org">openMP</a>.
Modern radio interferometers like
<a class="reference external" href="http://www.almaobservatory.org/en/home/">ALMA</a>,
<a class="reference external" href="https://science.nrao.edu/facilities/vla">VLA</a>,
<a class="reference external" href="http://www.iram-institute.org/EN/noema-project.php?ContentID=9&amp;rub=9&amp;srub=0&amp;ssrub=0&amp;sssrub=0">NOEMA</a>
and the future ones like
<a class="reference external" href="http://skatelescope.org">SKA</a> are pushing the computational efforts needed to model the observations to the extreme.
The unprecedented sensitivity and resolution achieved by these observatories require comparing model predictions
with huge amount of data points that sample a wide range of spatial frequencies.
In this context, <cite>galario</cite> provides a fast library useful for comparing a model to observations directly in the Fourier plane.</p>
<p>We presented <cite>galario</cite> in <a class="reference external" href="LINK">Tazzari, Beaujean and Testi (2017)</a>, where you can find more details about the
relevant equations and the algorithm implementation.
Here we do not aim to summarize the vast literature about Radio Interferometry, but we refer the interested reader to
<a class="reference external" href="http://aspbooks.org/a/volumes/table_of_contents/180">this</a> thorough reference.</p>
<p><cite>galario</cite> is actively developed on <a class="reference external" href="https://github.com/mtazzari/galario/">GitHub</a>.</p>
<p>Instructions on how to build and install <cite>galario</cite> can be found <a class="reference internal" href="install.html"><span class="doc">here</span></a>.</p>
</div>
<div class="section" id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>Let’s say you have an observational dataset of <cite>N</cite> visibility points located at (<cite>u</cite><sub>j</sub>, <cite>v</cite><sub>j</sub>), with <cite>j=1…N</cite> and <cite>u</cite><sub>j</sub>, <cite>v</cite><sub>j</sub>
expressed in units of the observing wavelength. <cite>V</cite><sub>obs, j</sub> is the <cite>j-th</cite> complex visibility with associated theoretical weight <cite>w</cite><sub>j</sub>.
If you want to compute the visibilities of a model <cite>image</cite> in the same (<cite>u</cite><sub>j</sub>, <cite>v</cite><sub>j</sub>) locations of the observations,
you can easily do it with the GPU accelerated <cite>galario</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">galario</span> <span class="kn">import</span> <span class="n">pc</span><span class="p">,</span> <span class="n">au</span>
<span class="kn">from</span> <span class="nn">galario.double_cuda</span> <span class="kn">import</span> <span class="n">sampleImage</span>

<span class="n">dist</span> <span class="o">=</span> <span class="mf">240.</span> <span class="o">*</span> <span class="n">pc</span>  <span class="c1"># distance to the source [cm]</span>
<span class="n">dxy</span> <span class="o">=</span> <span class="mf">10.</span> <span class="o">*</span> <span class="n">au</span>    <span class="c1"># spatial size of the pixel in the model image [cm]</span>

<span class="n">vis</span> <span class="o">=</span> <span class="n">sampleImage</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">dxy</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
<p>where <cite>vis</cite> is a complex array of length <cite>N</cite> containing the real (<cite>vis.real</cite>) and imaginary (<cite>vis.imag</cite>) part of the synthetic visibilities.</p>
<p>If you are doing a <strong>fit</strong> and the only number you are interested in is the <strong>chi square</strong> needed for the likelihood computation,
you can use directly:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">galario.double_cuda</span> <span class="kn">import</span> <span class="n">chi2Image</span>

<span class="n">chi2</span> <span class="o">=</span> <span class="n">chi2Image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">dxy</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">V_obs</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">V_obs</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to compare the observations with a model characterized by an <strong>axisymmetric brightness profile</strong>, <cite>galario</cite> offers
dedicated functions that exploit the symmetry of the model to accelerate the image creation.
If <cite>I(R)</cite> is the radial brightness profile, the command is as simple as:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">galario.double_cuda</span> <span class="kn">import</span> <span class="n">sampleProfile</span>

<span class="n">vis</span> <span class="o">=</span> <span class="n">sampleProfile</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">Rmin</span><span class="p">,</span> <span class="n">dR</span><span class="p">,</span> <span class="n">nxy</span><span class="p">,</span> <span class="n">dxy</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
<p>where <cite>Rmin</cite> and <cite>dR</cite> are the innermost radius and the cell size of the grid on which <cite>I(R)</cite> is computed. An analogous function
<cite>chi2Profile</cite> allows one to compute directly the chi square.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you work on a machine <strong>without</strong> a CUDA-enabled GPU, don’t worry: you can use the CPU version
of <cite>galario</cite> by just removing the subscript <cite>“_cuda”</cite> from the imports above and benefit from the openMP parallelization.
All the function names and interfaces are the same for GPU and CPU version!</p>
</div>
<p>More details on how to get started with <cite>galario</cite> are given in the <a class="reference internal" href="quickstart.html"><span class="doc">quickstart</span></a>.</p>
</div>
<div class="section" id="license-and-attribution">
<h2>License and Attribution<a class="headerlink" href="#license-and-attribution" title="Permalink to this headline">¶</a></h2>
<p>If you use <cite>galario</cite> for your research, please cite <a class="reference external" href="LINK">Tazzari, Beaujean and Testi (2017)</a> .
The BibTeX entry for the paper is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@ARTICLE</span><span class="p">{</span><span class="o">...</span><span class="p">}</span>
</pre></div>
</div>
<p><cite>galario</cite> is free software licensed under the LGPLv3 License. For more details see the <a class="reference internal" href="license.html"><span class="doc">LICENSE</span></a>.</p>
<p>© Copyright 2017 Marco Tazzari, Frederik Beaujean, Leonardo Testi.</p>
</div>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">How to build and install <cite>galario</cite></a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#system-requirements">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#quick-steps-to-build-and-install">Quick steps to build and install</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#install">Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#tests">Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#documentation">Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">A quickstart example</a></li>
<li class="toctree-l1"><a class="reference internal" href="py-api.html">Python API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="py-api.html#computing-synthetic-visibilities">Computing synthetic visibilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="py-api.html#computing-directly-the-chi-square">Computing directly the chi square</a></li>
<li class="toctree-l2"><a class="reference internal" href="py-api.html#useful-functions">Useful functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="C-api.html">Using galario from C</a><ul>
<li class="toctree-l2"><a class="reference internal" href="C-api.html#a-small-example">A small example</a></li>
<li class="toctree-l2"><a class="reference internal" href="C-api.html#example-walk-through">Example walk-through</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="C-api.html#c-api-reference">C API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="C-api.html#sample-and-chi2-functions">Sample and chi2 functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="C-api.html#management-functions">Management functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="C-api.html#individual-operations">Individual operations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>
</div>
</div>
<div class="section" id="indices">
<h2>Indices<a class="headerlink" href="#indices" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    <a id="sidebar-anchor"></a>
    

  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">galario</a><ul>
<li><a class="reference internal" href="#gpu-accelerated-library-for-analysing-radio-interferometry-observations"><strong>GPU Accelerated Library for Analysing Radio Interferometry Observations</strong></a></li>
<li><a class="reference internal" href="#basic-usage">Basic Usage</a></li>
<li><a class="reference internal" href="#license-and-attribution">License and Attribution</a></li>
<li><a class="reference internal" href="#contents">Contents</a></li>
<li><a class="reference internal" href="#indices">Indices</a></li>
</ul>
</li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="install.html"
                        title="next chapter">How to build and install <cite>galario</cite></a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="install.html" title="How to build and install galario"
             accesskey="N">next</a> |</li>
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Marco Tazzari, Frederik Beaujean, Leonardo Testi.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>