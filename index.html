<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>galario &#8212; galario 0.1 documentation</title>
    <link rel="stylesheet" href="_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="How to build and install galario" href="install.html" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <link rel="shortcut icon" type="image/png" href="_static/favicon.png" />
    <meta name="viewport" content="width=device-width,initial-scale=0.8">
    
    

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="responsive-menu"><a href="#sidebar-anchor" title="Navigation">&#9776;</a></li>
        <li><a href="#">galario 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    
        <div class="badge">
            <a href="https://github.com/mtazzari/galario/">Fork me on GitHub</a>
            <img src="_static/right-red@2x.png">
        </div>
    
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <a class="reference internal image-reference" href="_images/galario.jpg"><img alt="Galario logo. Credit: Tazzari, Beaujean, Testi." class="align-left" src="_images/galario.jpg" style="width: 216.4px; height: 101.60000000000001px;" /></a>
<div class="section" id="galario">
<h1><strong>galario</strong><a class="headerlink" href="#galario" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<div class="section" id="gpu-accelerated-library-for-analysing-radio-interferometer-observations">
<h2><strong>GPU Accelerated Library for Analysing Radio Interferometer Observations</strong><a class="headerlink" href="#gpu-accelerated-library-for-analysing-radio-interferometer-observations" title="Permalink to this headline">¶</a></h2>
<p><strong>galario</strong> is a library that exploits the computing power of modern graphic cards (GPUs) to accelerate the comparison of model
predictions to radio interferometer observations. Namely, it speeds up the computation of the synthetic visibilities
given a model image (or an axisymmetric brightness profile) and their comparison to the observations.</p>
<p>Along with the GPU accelerated version based on the
<a class="reference external" href="https://developer.nvidia.com/cuda-toolkit">CUDA Toolkit</a>, <strong>galario</strong> offers a CPU counterpart accelerated with
<a class="reference external" href="http://www.openmp.org">openMP</a>.</p>
<a class="reference external image-reference" href="http://www.eso.org/public/images/baan_7698/"><img alt="ALMA antennas on the Chajnantor plateau. Credit: ESO" class="align-center" src="_images/alma_panoramic.jpeg" style="width: 1024.0px; height: 237.60000000000002px;" /></a>
<p>Modern radio interferometers like
<a class="reference external" href="http://www.almaobservatory.org/en/home/">ALMA</a>,
<a class="reference external" href="https://science.nrao.edu/facilities/vla">Karl G. Jansky VLA</a>,
<a class="reference external" href="http://www.iram-institute.org/EN/noema-project.php?ContentID=9&amp;rub=9&amp;srub=0&amp;ssrub=0&amp;sssrub=0">NOEMA</a>
are pushing to the extreme the computational efforts needed to model the observations.
The unprecedented sensitivity and resolution achieved by these observatories deliver huge amount of data that sample a wide range of spatial frequencies.
In this context, <strong>galario</strong> provides a fast library useful for comparing a model to observations directly in the Fourier plane.</p>
<p>We presented <strong>galario</strong> in <a class="reference external" href="https://arxiv.org/abs/1709.06999">Tazzari, Beaujean and Testi (2017)</a>, where you can find more details about the
relevant equations and the algorithm implementation.
Here we do not aim to summarize the vast literature about Radio Interferometry, but we refer the interested reader to the
<a class="reference external" href="http://aspbooks.org/a/volumes/table_of_contents/180">Synthesis Imaging in Radio Astronomy II</a> book.</p>
<p><strong>galario</strong> is actively developed on <a class="reference external" href="https://github.com/mtazzari/galario/">GitHub</a>
and has already been employed in <a class="reference internal" href="studies.html"><span class="doc">these published studies</span></a>.</p>
<p>Instructions on how to build and install <strong>galario</strong> can be found <a class="reference internal" href="install.html"><span class="doc">here</span></a>.</p>
<p>More details on how to get started with <strong>galario</strong> are given in the <a class="reference internal" href="quickstart.html"><span class="doc">Quickstart example</span></a>.</p>
<p>Be sure to checkout also the <a class="reference internal" href="cookbook.html"><span class="doc">Cookbook</span></a> with many useful code snippets!</p>
</div>
<div class="section" id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>Let’s say you have an observational dataset of <code class="code docutils literal"><span class="pre">M</span></code> visibility points located at <span class="math">\((u_j, v_j)\)</span>, with <span class="math">\(j=1...M\)</span> and <span class="math">\(u_j\)</span>, <span class="math">\(v_j\)</span> expressed in units of the observing wavelength. <span class="math">\(V_{obs\ j}\)</span> (Jy) is the <span class="math">\(j\)</span>-th complex visibility with associated theoretical weight <span class="math">\(w_j\)</span>.
With <strong>galario</strong> you can:</p>
<p><strong>1) Compute visibilities from a model image</strong></p>
<blockquote>
<div><p>If you want to compute the visibilities of a model <code class="code docutils literal"><span class="pre">image</span></code> (Jy/px) with pixel size <code class="code docutils literal"><span class="pre">dxy</span></code> (rad) in the same <span class="math">\((u_j, v_j)\)</span> locations of the observations, you can easily do it with the GPU accelerated <strong>galario</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">galario.double_cuda</span> <span class="kn">import</span> <span class="n">sampleImage</span>

<span class="n">vis</span> <span class="o">=</span> <span class="n">sampleImage</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">dxy</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="code docutils literal"><span class="pre">vis</span></code> is a complex array of length <span class="math">\(N\)</span> containing the real (<code class="code docutils literal"><span class="pre">vis.real</span></code>) and imaginary (<code class="code docutils literal"><span class="pre">vis.imag</span></code>) part of the synthetic visibilities.</p>
</div></blockquote>
<p><strong>2) Compute visibilities from an axisymmetric brightness profile</strong></p>
<blockquote>
<div><p>If you want to compare the observations with a model characterized by an <strong>axisymmetric brightness profile</strong>, <strong>galario</strong> offers dedicated functions that exploit the symmetry of the model to accelerate the image creation.</p>
<p>If <span class="math">\(I(R)\)</span> (Jy/sr) is the radial brightness profile, the command is as simple as:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">galario.double_cuda</span> <span class="kn">import</span> <span class="n">sampleProfile</span>

<span class="n">vis</span> <span class="o">=</span> <span class="n">sampleProfile</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">Rmin</span><span class="p">,</span> <span class="n">dR</span><span class="p">,</span> <span class="n">nxy</span><span class="p">,</span> <span class="n">dxy</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="code docutils literal"><span class="pre">Rmin</span></code> and <code class="code docutils literal"><span class="pre">dR</span></code> are expressed in radians and are the innermost radius and the cell size of the grid on which <span class="math">\(I(R)\)</span> is computed. An analogous function
<code class="code docutils literal"><span class="pre">chi2Profile</span></code> allows one to compute directly the chi square.</p>
</div></blockquote>
<p><strong>3) Compute the</strong> <span class="math">\(\chi^2\)</span> <strong>of a model (image or brightness profile)</strong></p>
<blockquote>
<div><p>If you are doing a <strong>fit</strong> and the only number you are interested in is the <span class="math">\(\chi^2\)</span> for the likelihood computation, you can use directly one of these:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">galario.double_cuda</span> <span class="kn">import</span> <span class="n">chi2Image</span>

<span class="n">chi2</span> <span class="o">=</span> <span class="n">chi2Image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">dxy</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">V_obs</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">V_obs</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
<span class="n">chi2</span> <span class="o">=</span> <span class="n">chi2Profile</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">Rmin</span><span class="p">,</span> <span class="n">dR</span><span class="p">,</span> <span class="n">nxy</span><span class="p">,</span> <span class="n">dxy</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">V_obs</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">V_obs</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>4) Do all the above operations + translate and rotate the model image</strong></p>
<blockquote>
<div><p>To translate the model image in Right Ascension and Declination direction by (dRA, dDec) offsets (rad),
or to rotate the image by a Position Angle PA (rad) (defined East of North), you can specify them as optional parameters.</p>
<p>This works for all the <code class="code docutils literal"><span class="pre">sampleImage</span></code>, <code class="code docutils literal"><span class="pre">sampleProfile</span></code>, <code class="code docutils literal"><span class="pre">chi2Image</span></code> and <code class="code docutils literal"><span class="pre">chi2Profile</span></code> functions:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">galario.double_cuda</span> <span class="kn">import</span> <span class="n">sampleImage</span>

<span class="n">vis</span> <span class="o">=</span> <span class="n">sampleImage</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">dxy</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">dRA</span><span class="o">=</span><span class="n">dRA</span><span class="p">,</span> <span class="n">dDec</span><span class="o">=</span><span class="n">dDec</span><span class="p">,</span> <span class="n">PA</span><span class="o">=</span><span class="n">PA</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you work on a machine <strong>without</strong> a CUDA-enabled GPU, don’t worry: you can use the CPU version
of <strong>galario</strong> by just removing the subscript <code class="code docutils literal"><span class="pre">&quot;_cuda&quot;</span></code> from the imports above and benefit from the openMP parallelization.
All the function names and interfaces are the same for GPU and CPU version!</p>
</div>
</div>
<div class="section" id="license-and-attribution">
<h2>License and Attribution<a class="headerlink" href="#license-and-attribution" title="Permalink to this headline">¶</a></h2>
<p>If you use <strong>galario</strong> for your research, please cite <a class="reference external" href="https://arxiv.org/abs/1709.06999">Tazzari, Beaujean and Testi (2017)</a> .
The BibTeX entry for the paper is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>@ARTICLE{Tazzari:galario,
Adsurl = {http://adsabs.harvard.edu/cgi-bin/bib_query?arXiv:1709.06999},
Archiveprefix = {arXiv},
Arxivurl = {http://arxiv.org/abs/1709.06999v1},
Author = {{Tazzari}, Marco and {Beaujean}, Frederik and {Testi}, Leonardo},
Eprint = {1709.06999v1},
Jornal = {ArXiv e-prints},
Month = {Sep},
Primaryclass = {astro-ph.IM},
Title = {GALARIO: a GPU Accelerated Library for Analysing Radio Interferometer Observations},
Year = {2017}}
</pre></div>
</div>
<p><strong>galario</strong> has also a <a class="reference external" href="https://doi.org/10.5281/zenodo.891039">Zenodo DOI</a>, which can be used to refer to the exact
version of <strong>galario</strong> used in a paper.</p>
<p><strong>galario</strong> is free software licensed under the LGPLv3 License. For more details see the <a class="reference internal" href="license.html"><span class="doc">LICENSE</span></a>.</p>
<p>© Copyright 2017 Marco Tazzari, Frederik Beaujean, Leonardo Testi.</p>
</div>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">How to build and install <strong>galario</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#system-requirements">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#quick-steps-to-build-and-install">Quick steps to build and install</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#install">Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#tests">Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#documentation">Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">A quickstart example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#fit-of-a-single-wavelength-data-set">Fit of a single-wavelength data set</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html"><strong>galario</strong> Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cookbook.html#using-the-gpu-and-cpu-version">Using the GPU and CPU version</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook.html#selecting-the-gpu">Selecting the GPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook.html#parallelization-setting-the-threads">Parallelization: setting the threads</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="py-api.html">Python API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="py-api.html#computing-synthetic-visibilities">Computing synthetic visibilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="py-api.html#computing-directly-the-chi-square">Computing directly the chi square</a></li>
<li class="toctree-l2"><a class="reference internal" href="py-api.html#gpu-related">GPU related</a></li>
<li class="toctree-l2"><a class="reference internal" href="py-api.html#other-useful-functions">Other useful functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="C-api.html">C API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="C-api.html#sample-and-chi2-functions">Sample and chi2 functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="C-api.html#management-functions">Management functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="C-api.html#individual-operations">Individual operations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="C-example.html">Using galario from C</a><ul>
<li class="toctree-l2"><a class="reference internal" href="C-example.html#a-small-example">A small example</a></li>
<li class="toctree-l2"><a class="reference internal" href="C-example.html#example-walk-through">Example walk-through</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="studies.html">Studies that used <strong>galario</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>
</div>
</div>
<div class="section" id="indices">
<h2>Indices<a class="headerlink" href="#indices" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    <a id="sidebar-anchor"></a>
    

  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><strong>galario</strong></a><ul>
<li><a class="reference internal" href="#gpu-accelerated-library-for-analysing-radio-interferometer-observations"><strong>GPU Accelerated Library for Analysing Radio Interferometer Observations</strong></a></li>
<li><a class="reference internal" href="#basic-usage">Basic Usage</a></li>
<li><a class="reference internal" href="#license-and-attribution">License and Attribution</a></li>
<li><a class="reference internal" href="#contents">Contents</a></li>
<li><a class="reference internal" href="#indices">Indices</a></li>
</ul>
</li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="install.html"
                        title="next chapter">How to build and install <strong>galario</strong></a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="install.html" title="How to build and install galario"
             accesskey="N">next</a> |</li>
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Marco Tazzari, Frederik Beaujean, Leonardo Testi.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.5.
    </div>
  </body>
</html>